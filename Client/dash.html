 <!DOCTYPE html>
 <html>
 <head>
 	<title> KNET DATABASE LINK </title>
 	<link rel="stylesheet" href="/lib/bootstrap.css">
 	<link rel="stylesheet" type="text/css" href="default.css">
 	<link rel="stylesheet" type="text/css" href="links.css">
 	<script src="js/normal.js"></script>
 </head>
 <body>
 	<div id="controls">
 		<button type="button" class="btn btn-default" aria-label="Left Align" onclick="location.href='help.html'">
 			<span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>
 		</button>
 		<input type="button" class="btn btn-danger" value="logout" onclick="logout()">
 	</div>
 	<div id="header">
 		<h1>\\KNET DATABASE></h1>
 		<h7 id="path" class="locText"><div class = 'wrapper'><a class = 'cool third after' href='user.html'>\DATABASE\DASHBOARD</a></h7>
 	</div>
 </div>
 <ul class="nav">
 	<li class="nav active"><a href="user.html">Front Page</a></li>
 	<li class="nav"><a href="database.html">Database</a></li>
 	<li class="nav"><a href="usr.html">User Info</a></li>
 	<li class="nav" id="um" style="display:none"><a href="usrMgmt.html">User Managment</a></li>

 	<li class="nav disabled" id="dash" style="display:none"><a href="dash.html">Dashboard</a></li>
 </ul>
 <div id="content">
 	<h2 id="userWelcome"> KNET-DATABASE Operator Dashboard </h2>
 	<hr>
 	<h2>System Log</h2>
 	Choose how many lines: 
 	<select id="rowSelector" onchange="getLog()">
 		<option value="10">10</option>
 		<option value="25">25</option>
 		<option value="50">50</option>
 		<option value="100">100</option>
 	</select>
 	<div id=log>
 	</div>
 	<hr>
 </div>
 <script src="/lib/jquery/dist/jquery.js"></script>
 <script type="text/javascript">
 	var api = "http://knet.kcorporation.tk/api";
 	var att;
 	var isAdmin = false;
 	var renderArr = [];
 	function getAdmin(){
 		request("usrPage", "isAdmin", function(admin){
 			if(admin == "true")
 			{
 				document.getElementById("dash").style = "display:block";
 				document.getElementById("um").style = "display:block";
 				isAdmin = true;
 			}
 			getLog();
 		});
 	}
 	function getName(){
 		request("usrPage", "usrName", function(name){
 			getAdmin();
 		});
 	}
 	function getLog() {
 		request("dashboard", "log", function(log){
 			log = log.split(',');
 			log.forEach(function (line, index){
 				renderArr[index] = line + "<br>";
 				if(index == log.length - 1) {
 					render();
 				}
 			});
 		});
 	}
 	function render() {
		renderArr = renderArr.slice(0, document.getElementById('rowSelector').value);
		document.getElementById('log').innerHTML = renderArr.toString().replace(/,|GMT\+0200 \(EET\)/g, ' ');
	}
	getAdmin();
</script>
</body>
</html>
